{% extends 'tasks/base.html' %}
{% block content %}
<div class="container-fluid p-0">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-5">
        <div>
            <h2 class="fw-bold mb-1 text-dark">Project Board</h2>
            <p class="text-muted mb-0">Manage your tasks and track progress.</p>
        </div>
        
        <div class="d-flex gap-3 mt-3 mt-md-0">
            <form method="get" class="position-relative">
                <i class="fas fa-search position-absolute text-muted" style="left: 15px; top: 12px;"></i>
                <input class="form-control ps-5 rounded-pill border-0 shadow-sm" style="min-width: 250px;" 
                       type="search" name="q" placeholder="Search tasks..." value="{{ query }}">
            </form>
            <a href="{% url 'create_task' %}" class="btn btn-primary rounded-pill px-4 d-flex align-items-center shadow-sm">
                <i class="fas fa-plus me-2"></i> Add Task
            </a>
        </div>
    </div>

    <div class="row g-4">
        
        <div class="col-md-4">
            <div class="d-flex align-items-center justify-content-between mb-3 px-1">
                <h6 class="text-uppercase fw-bold text-secondary mb-0 tracking-wide" style="letter-spacing: 1px; font-size: 0.85rem;">
                    <i class="fas fa-circle text-secondary me-2" style="font-size: 8px;"></i>To Do
                </h6>
                <span class="badge bg-white text-dark border shadow-sm rounded-pill px-3">{{ todos.count }}</span>
            </div>
            <div class="kanban-col bg-light rounded-4 p-2 h-100" style="min-height: 500px; background: #f8fafc;">
                {% for task in todos %} 
                    {% include 'tasks/card_partial.html' %} 
                {% empty %}
                    <div class="text-center text-muted mt-5 opacity-50">
                        <i class="far fa-clipboard fa-3x mb-3"></i>
                        <p class="small">No tasks to do</p>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="d-flex align-items-center justify-content-between mb-3 px-1">
                <h6 class="text-uppercase fw-bold text-primary mb-0 tracking-wide" style="letter-spacing: 1px; font-size: 0.85rem;">
                    <i class="fas fa-circle text-primary me-2" style="font-size: 8px;"></i>In Progress
                </h6>
                <span class="badge bg-white text-dark border shadow-sm rounded-pill px-3">{{ doing.count }}</span>
            </div>
            <div class="kanban-col bg-light rounded-4 p-2 h-100" style="min-height: 500px; background: #eff6ff;">
                {% for task in doing %} 
                    {% include 'tasks/card_partial.html' %} 
                {% empty %}
                    <div class="text-center text-muted mt-5 opacity-50">
                        <i class="fas fa-spinner fa-3x mb-3"></i>
                        <p class="small">Nothing in progress</p>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="d-flex align-items-center justify-content-between mb-3 px-1">
                <h6 class="text-uppercase fw-bold text-success mb-0 tracking-wide" style="letter-spacing: 1px; font-size: 0.85rem;">
                    <i class="fas fa-circle text-success me-2" style="font-size: 8px;"></i>Done
                </h6>
                <span class="badge bg-white text-dark border shadow-sm rounded-pill px-3">{{ done.count }}</span>
            </div>
            <div class="kanban-col bg-light rounded-4 p-2 h-100" style="min-height: 500px; background: #f0fdf4;">
                {% for task in done %} 
                    {% include 'tasks/card_partial.html' %} 
                {% empty %}
                    <div class="text-center text-muted mt-5 opacity-50">
                        <i class="far fa-check-circle fa-3x mb-3"></i>
                        <p class="small">No completed tasks</p>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
