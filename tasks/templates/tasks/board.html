{% extends 'tasks/base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Task Board</h2>
    <div class="d-flex gap-2">
        <form method="get" class="d-flex">
            <input class="form-control me-2" type="search" name="q" placeholder="Search tasks..." value="{{ query }}" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
        <a href="{% url 'create_task' %}" class="btn btn-primary text-nowrap">+ Add Task</a>
    </div>
</div>

<div class="row">
    <div class="col-md-4">
        <h5 class="text-secondary fw-bold mb-3">To Do <span class="badge bg-secondary rounded-pill">{{ todos.count }}</span></h5>
        <div class="kanban-col">
            {% for task in todos %} 
                {% include 'tasks/card_partial.html' %} 
            {% empty %}
                <div class="text-center text-muted mt-5">
                    <i class="fas fa-clipboard-list fa-2x mb-2"></i>
                    <p>No tasks to do.</p>
                </div>
            {% endfor %}
        </div>
    </div>
    
    <div class="col-md-4">
        <h5 class="text-primary fw-bold mb-3">In Progress <span class="badge bg-primary rounded-pill">{{ doing.count }}</span></h5>
        <div class="kanban-col">
            {% for task in doing %} 
                {% include 'tasks/card_partial.html' %} 
            {% empty %}
                <div class="text-center text-muted mt-5">
                    <i class="fas fa-spinner fa-2x mb-2"></i>
                    <p>Nothing in progress.</p>
                </div>
            {% endfor %}
        </div>
    </div>
    
    <div class="col-md-4">
        <h5 class="text-success fw-bold mb-3">Done <span class="badge bg-success rounded-pill">{{ done.count }}</span></h5>
        <div class="kanban-col">
            {% for task in done %} 
                {% include 'tasks/card_partial.html' %} 
            {% empty %}
                <div class="text-center text-muted mt-5">
                    <i class="fas fa-check-circle fa-2x mb-2"></i>
                    <p>No completed tasks yet.</p>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
